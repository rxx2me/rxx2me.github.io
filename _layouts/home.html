---
layout: default
---

{%- assign posts = paginator.posts | default: site.posts -%}
{%- assign df = site.data.locales[site.lang].df_post | default: "%Y-%m-%d" -%}

<div class="post-list">
{%- for post in posts -%}
  {%- assign cat = post.categorie | default: post.categories -%}
  {%- assign cat = cat | first | downcase -%}
  {%- assign badge = post.cat_image | default: site.data.category_badges[cat] -%}

  <!-- عدّل --badge و --gap حسب ما تحب -->
  <article class="post-preview" style="--badge: 96px; --gap: 14px; position: relative;">
    <h1 class="post-title">
      <div class="post-title-wrap"
           style="display:grid;grid-template-columns:var(--badge) 1fr;align-items:center;column-gap:var(--gap)">
        {%- if badge -%}
          <span
            class="cat-badge"
            style="inline-size:var(--badge);block-size:var(--badge);border-radius:12px;display:inline-block;background-image:url('{{ badge | relative_url }}');background-size:cover;background-position:center;background-repeat:no-repeat;flex:0 0 var(--badge);">
          </span>
        {%- endif -%}
        <span class="post-title-text">{{ post.title | escape }}</span>
      </div>
    </h1>

    {%- if post.excerpt -%}
    <div class="post-excerpt"
         style="margin-inline-start: calc(var(--badge) + var(--gap));">
      {{ post.excerpt | strip_html | truncate: 160 }}
    </div>
    {%- endif -%}

    <div class="post-meta"
         style="margin-inline-start: calc(var(--badge) + var(--gap));">
      <span class="post-date">{{ post.date | date: df }}</span>
      {%- if post.categories and post.categories != empty -%}
        <span class="post-cat"> •
          {%- for c in post.categories -%}
            {%- assign slug = c | slugify -%}
            <a href="{{ '/categories/' | append: slug | append: '/' | relative_url }}">{{ c }}</a>{% unless forloop.last %}, {% endunless %}
          {%- endfor -%}
        </span>
      {%- endif -%}
    </div>

    <!-- رابط يغطي البطاقة كلها (سلوك Chirpy القياسي) -->
    <a class="post-link"
       href="{{ post.url | relative_url }}"
       aria-label="{{ post.title | escape }}"
       style="position:absolute; inset:0;"></a>
  </article>
{%- endfor -%}
</div>

{%- if paginator and paginator.total_pages and paginator.total_pages > 1 -%}
  {%- include paginator.html -%}
{%- endif -%}
